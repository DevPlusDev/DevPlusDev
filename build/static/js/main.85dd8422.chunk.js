(this.webpackJsonpDevPlusDev=this.webpackJsonpDevPlusDev||[]).push([[0],{61:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(17),i=n.n(a),o=(n(61),n(8)),s=n(107),u=n(11),j=n(14),l=n(20),d=n(21),b={mode:"rtc",codec:"vp8",appId:"a0c5b211bfaa4092972eb225f76e13a7",token:"007eJxTYHDlr7N8tbP7/fnG82yHDgRpiT6buvWmYc99nz/zbF9L9PUoMCQaJJsmGRkaJqUlJpoYWBpZmhulJhkZmaaZm6UaGieay+U0JjcEMjJ4ft3MysgAgSA+C0NuYmYeAwMAyCYg6Q=="},f=Object(d.createClient)(b),O=Object(d.createMicrophoneAndCameraTracks)(),h="main",p=n(106),x=n(29),v=n(50),k=n.n(v),m=n(51),y=n.n(m),g=n(52),C=n.n(g),w=n(53),J=n.n(w),A=n(54),E=n.n(A),S=n(2);function T(e){var t=f(),n=e.tracks,r=e.setStart,a=e.setInCall,i=Object(c.useState)({video:!0,audio:!0}),j=Object(o.a)(i,2),d=j[0],b=j[1],O=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,n[0].setEnabled(!d.audio);case 3:b((function(e){return Object(x.a)(Object(x.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,n[1].setEnabled(!d.video);case 9:b((function(e){return Object(x.a)(Object(x.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),n[0].close(),n[1].close(),r(!1),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(p.a,{container:!0,spacing:2,alignItems:"center",children:[Object(S.jsx)(p.a,{item:!0,children:Object(S.jsx)(s.a,{variant:"contained",color:d.audio?"primary":"secondary",onClick:function(){return O("audio")},children:d.audio?Object(S.jsx)(k.a,{}):Object(S.jsx)(y.a,{})})}),Object(S.jsx)(p.a,{item:!0,children:Object(S.jsx)(s.a,{variant:"contained",color:d.video?"primary":"secondary",onClick:function(){return O("video")},children:d.video?Object(S.jsx)(C.a,{}):Object(S.jsx)(J.a,{})})}),Object(S.jsx)(p.a,{item:!0,children:Object(S.jsxs)(s.a,{variant:"contained",color:"default",onClick:function(){return h()},children:["Leave",Object(S.jsx)(E.a,{})]})})]})}function D(e){var t=e.users,n=e.tracks,r=Object(c.useState)(12),a=Object(o.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){s(Math.max(Math.floor(12/(t.length+1)),4))}),[t,n]),Object(S.jsxs)(p.a,{container:!0,style:{height:"100%"},children:[Object(S.jsx)(p.a,{item:!0,xs:i,children:Object(S.jsx)(d.AgoraVideoPlayer,{videoTrack:n[1],style:{height:"100%",width:"100%"}})}),t.length>0&&t.map((function(e){return console.log("USER ADDED:",e),e.videoTrack?Object(S.jsx)(p.a,{item:!0,xs:i,children:Object(S.jsx)(d.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{height:"100%",width:"100%"}},e.uid)}):null}))]})}function I(e){var t=e.setInCall,n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(!1),d=Object(o.a)(s,2),x=d[0],v=d[1],k=f(),m=O(),y=m.ready,g=m.tracks;return Object(c.useEffect)((function(){var e=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.on("user-published",function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,n){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.subscribe(t,n);case 2:"video"===n&&i((function(e){return[].concat(Object(j.a)(e),[t])})),"audio"===n&&t.audioTrack.play();case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),k.on("user-left",(function(e){i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,k.join(b.appId,t,b.token,null);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Error: ".concat(e.t0));case 11:if(!g){e.next=14;break}return e.next=14,k.publish(g[0],g[1]);case 14:v(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();if(y&&g)try{e(h)}catch(t){console.log("Error: ".concat(t))}}),[h,k,y,g]),Object(S.jsxs)(p.a,{container:!0,direction:"column",style:{height:"100%"},children:[Object(S.jsx)(p.a,{item:!0,style:{height:"5%"},children:y&&g&&Object(S.jsx)(T,{tracks:g,setStart:x,setInCall:t})}),Object(S.jsx)(p.a,{item:!0,style:{height:"95%"},children:x&&g&&Object(S.jsx)(D,{tracks:g,users:a})})]})}var M=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(S.jsx)("div",{className:"App",style:{height:"100%"},children:n?Object(S.jsx)(I,{setInCall:r}):Object(S.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(){return r(!0)},children:"Join Call"})})};i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(M,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.85dd8422.chunk.js.map